# Application
spring.application.name=58703

# H2 Database (in-memory)
spring.datasource.url=jdbc:h2:file:./data/tododb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=admin
spring.datasource.password=admin123

# H2 Console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false

# JPA/Hibernate
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.defer-datasource-initialization=true

# JWT Configuration
#jwt.secret=5367566B59703373367639792F423F4528482B4D6251655468576D5A71347437
#jwt.expiration=86400000

# Logging
logging.level.org.springframework.security=DEBUG
logging.level.com.s58703.demo=DEBUG
logging.level.org.springframework.web=DEBUG
spring.security.user.name=user
spring.security.user.password=1234

# Server
server.port=8443

# ===== TLS/SSL Configuration =====
# Enable HTTPS
server.ssl.enabled=true
# Path to keystore (place keystore.p12 in src/main/resources)
server.ssl.key-store=classpath:keystore.p12
server.ssl.key-store-password=password
server.ssl.key-store-type=PKCS12
server.ssl.key-alias=tomcat

# TLS Protocol and Cipher Configuration
server.ssl.protocol=TLS
server.ssl.enabled-protocols=TLSv1.3,TLSv1.2

# Secure Cipher Suites (only strong ciphers)
server.ssl.ciphers=TLS_AES_128_GCM_SHA256,TLS_AES_256_GCM_SHA384,TLS_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384

# Client authentication (optional - set to 'need' or 'want' if required)
server.ssl.client-auth=none

# ===== HTTP/1.1 Persistent Connections (Keep-Alive) =====
# Enable HTTP keep-alive connections
server.connection-timeout=60s
# Maximum time to wait for the next request on a persistent connection
server.keep-alive-timeout=60s
# Maximum number of requests allowed per connection
server.max-keep-alive-requests=100

# Tomcat specific keep-alive settings
server.tomcat.connection-timeout=60000
server.tomcat.keep-alive-timeout=60000
server.tomcat.max-keep-alive-requests=100

# Connection pooling
server.tomcat.threads.max=200
server.tomcat.threads.min-spare=10
server.tomcat.max-connections=10000
server.tomcat.accept-count=100

# ===== Compression (improves performance with keep-alive) =====
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,application/javascript,text/css
server.compression.min-response-size=1024

# ===== HTTP/2 Support (optional but recommended) =====
# HTTP/2 automatically uses multiplexing instead of keep-alive
server.http2.enabled=true

# ===== Additional Performance Settings =====
# Enable response caching
spring.web.resources.cache.cachecontrol.max-age=3600
spring.web.resources.cache.cachecontrol.must-revalidate=true

# Connection pool for database (persistent connections to DB)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.keepalive-time=300000